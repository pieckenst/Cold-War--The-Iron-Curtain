##############
# People Republic of China Events
##############

add_namespace = prc

# 5 base division because of Focus Tree
country_event = {
	id = prc.1
	title = prc.1.t
	desc = prc.1.d
	picture = GFX_report_event_indian_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = prc.1.a
		hidden_effect = {
			load_oob = "PRC_communist_reinforcements"
		}
		custom_effect_tooltip = PRC_Communist_Army_arrives
		set_global_flag = prc_communist_army_setup
	}
}

# PRC goes with South Korea
country_event = {
	id = prc.2
	title = prc.2.t
	desc = prc.2.d
	picture = GFX_report_event_prc_successful
	
	trigger = {
		PRC = {
			owns_state = 746
			owns_state = 745
			owns_state = 747
			owns_state = 749
			owns_state = 748
			controls_state = 746
			controls_state = 745
			controls_state = 747
			controls_state = 749
			controls_state = 748
		}
	}

	option = {
		name = prc.2.a
		KOR = {
			transfer_state = 745
			transfer_state = 746
			transfer_state = 747
			transfer_state = 748
			transfer_state = 749
		}
	}

	option = {
		name = prc.2.b
		add_opinion_modifier = { target = KOR modifier = PRC_south_korea_no_states } 
	}
}

# PRC goes with North Korea
country_event = {
	id = prc.3
	title = prc.3.t
	desc = prc.3.d
	picture = GFX_report_event_prc_successful
	
	trigger = {
		PRC = {
			owns_state = 750
			owns_state = 753
			owns_state = 754
			owns_state = 751
			owns_state = 752
			controls_state = 750
			controls_state = 753
			controls_state = 754
			controls_state = 752
			controls_state = 751
		}
	}

	option = {
		name = prc.3.a
		effect_tooltip = {
			KPA = {
				transfer_state = 750
				transfer_state = 751
				transfer_state = 752
				transfer_state = 753
				transfer_state = 754
				transfer_state = 755
				transfer_state = 525
			}
		}
	}

	option = {
		name = prc.3.b
		add_opinion_modifier = { target = KPA modifier = PRC_north_korea_no_states } 
	}
}

# After the civil war, the Republic of China exists in Taiwan
country_event = {
	id = prc.4
	
	trigger = {
		PRC = {
			owns_state = 524
			owns_state = 604
			owns_state = 601
			controls_state = 524
			controls_state = 604
			controls_state = 601
		}
	}

	immediate = {
		CHI = {
			transfer_state = 524
			country_event = chi.2
		}
		news_event = news.1009
	}

	option = {}

	mean_time_to_happen = {
		days = 7
	}
}

# 7 division because of Focus Tree
country_event = {
	id = prc.5
	title = prc.5.t
	desc = prc.5.d
	picture = GFX_report_event_indian_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = prc.5.a
		hidden_effect = {
			load_oob = "PRC_revolution_aid"
		}
		custom_effect_tooltip = PRC_revolution_reinforcement
		set_global_flag = PRC_revolution_reinforcement
	}
}

# PRC / USA says no to request
news_event = {
	id = prc.6
	title = prc.6.t
	desc = prc.6.d
	picture = GFX_report_event_prc_successful
	
	is_triggered_only = yes
	
	option = {
		name = prc.6.a
	}
}

# PRC / USA says yes to request
news_event = {
	id = prc.7
	title = prc.7.t
	desc = prc.7.d
	picture = GFX_report_event_prc_successful
	
	is_triggered_only = yes
	
	option = {
		name = prc.7.a
	}
}

# PRC / USA says no to faction request
news_event = {
	id = prc.8
	title = prc.8.t
	desc = prc.8.d
	picture = GFX_report_event_prc_successful
	
	is_triggered_only = yes
	
	option = {
		name = prc.7.a
	}
}

# PRC gets into the UN
country_event = {
	id = prc.9
	hidden = yes

	fire_only_once = yes

	trigger = {
		has_global_flag = eng_yes_prc_un_recognition
		has_global_flag = usa_yes_prc_un_recognition
		has_global_flag = sov_yes_prc_un_recognition
		has_global_flag = fra_yes_prc_un_recognition
		NOT = { has_global_flag = prc_un_recognized }
	}

	immediate = {
		add_opinion_modifier = { target = SOV modifier = PRC_un_recognition_opinion }
		add_opinion_modifier = { target = FRA modifier = PRC_un_recognition_opinion }
		add_opinion_modifier = { target = ENG modifier = PRC_un_recognition_opinion }
		add_opinion_modifier = { target = CHI modifier = PRC_not_un_recognition_opinion }
		news_event = news.1016
		set_global_flag = prc_un_recognizzed
	}

	mean_time_to_happen = {
		days = 7
	}

	option = {}

}

# PRC does not get into UN
country_event = {
	id = prc.10
	hidden = yes

	fire_only_once = yes

	trigger = {
		OR = {
			has_global_flag = eng_no_prc_un_recognition
			has_global_flag = usa_no_prc_un_recognition
			has_global_flag = sov_no_prc_un_recognition
			has_global_flag = fra_no_prc_un_recognition
		}
		NOT = { has_global_flag = prc_un_not_recognized }
	}

	immediate = {
		add_opinion_modifier = { target = CHI modifier = PRC_un_recognition_opinion }
		FRA = { news_event = news.1017 }
		ENG = { news_event = news.1017 }
		SOV = { news_event = news.1017 }
		USA = { news_event = news.1017 }
		CHI = { news_event = news.1017 }
		set_global_flag = prc_un_not_recognized
	}

	mean_time_to_happen = {
		days = 7
	}

	option = {}

}

# PRC sends out communist event
country_event = {
	id = prc.11
	title = prc.11.t
	desc = prc.11.d
	
	is_triggered_only = yes
	
	option = {
		name = prc.11.b
		ROOT = { add_opinion_modifier = { target = PRC modifier = PRC_communism_for_PRC_opinion } }
		ROOT = { add_opinion_modifier = { target = SOV modifier = PRC_communism_against_USSR_opinion } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				ROOT = { is_in_faction_with = SOV }
			}
		}
	}

	option = {
		name = prc.11.b
		ROOT = { add_opinion_modifier = { target = SOV modifier = PRC_communism_for_USSR_opinion } }
		ROOT = { add_opinion_modifier = { target = PRC modifier = PRC_communism_against_PRC_opinion } }
		ai_chance = {
			factor = 50
		}
	}
}